{%- set url -%}{{ title|slugify|alwaysProductionUrl }}/{%- endset -%}
{%- set title -%}{{ title|safe }}{%- endset -%}
{%- set shareButtons = siteConfig.shareButtons -%}

{% if shareButtons|length > 0 %}
  <div class="share-buttons">
    <p>{{ phrases.share_this_article }}:</p>

    {% if 'mastodon' in shareButtons %}
      {% include "partials/post/mastodon-share-dialog.njk" %}
    {% endif %}

    {% for shareButton in shareButtons %}
    <ul>

      {% if shareButton == 'mastodon' %}
      <li>
        <div data-tooltip="{{ phrases.share_on }} Mastodon - {{ phrases.opens_prompt }}" class="mastodon" tabindex="0">
          <svg class="bi"><use href="#icon-mastodon" /></svg>
        </div>
      </li>
      {% endif %}

      {% if shareButton == 'x' %}
      <li>
        <a target="_blank" rel="noopener noreferrer" data-tooltip="{{ phrases.share_on }} X - {{ phrases.opens_new_tab }}" rel="noopener noreferrer" href="https://x.com/intent/tweet/?text={{ title }}&amp;url={{ url }}" class="x">
          <svg class="bi"><use href="#icon-x" /></svg>
        </a>
      </li>
      {% endif %}

      {% if shareButton == 'linkedin' %}
      <li>
        <a target="_blank" rel="noopener noreferrer" data-tooltip="{{ phrases.share_on }} Linkedin - {{ phrases.opens_new_tab }}" rel="noopener noreferrer" href="https://www.linkedin.com/sharing/share-offsite/?url={{ url }}" class="linkedin">
          <svg class="bi"><use href="#icon-linkedin" /></svg>
        </a>
      </li>
      {% endif %}

      {% if shareButton == 'facebook' %}
      <li>
        <a target="_blank" rel="noopener noreferrer" data-tooltip="{{ phrases.share_on }} Facebook - {{ phrases.opens_new_tab }}" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u={{ url }}" class="facebook">
          <svg class="bi"><use href="#icon-facebook" /></svg>
        </a>
      </li>
      {% endif %}

      {% if shareButton == 'hackernews' %}
      <li>
        <a target="_blank" rel="noopener noreferrer" data-tooltip="{{ phrases.share_on }} Hacker News - {{ phrases.opens_new_tab }}" rel="noopener noreferrer" href="https://news.ycombinator.com/submitlink?u={{ url }}&amp;t={{ title }}" class="hackernews">
          <svg class="bi"><use href="#icon-hackernews" /></svg>
        </a>
      </li>
      {% endif %}

      {% if shareButton == 'clipboard' %}
      <li>
        <div class="clipboard" rel="noopener noreferrer" data-tooltip="{{ phrases.copy_to_clipboard }}" tabindex="0">
          <svg class="bi"><use href="#icon-clipboard" /></svg>
        </div>
      </li>
      {% endif %}

    {% endfor %}
    </ul>
  </div>
{% endif %}
